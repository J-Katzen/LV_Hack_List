{% extends "base.html" %}
{% block title %}My Profile{% endblock %}
    
{% block content %}
	<aside id="profile">
    
    	<!--Profile Picture goes here-->
    	<div id="blurb">
    	<h2>Name Goes Here</h2>
        <p>Blurb about the user</p>
        </div>
	</aside>

	<div class="listies">
		<h1>{{one_list.name}}</h1>
        <ul id= "lists">
            {% for item in items %}
            <li><a href="{{item.amazon_link}}"><img src="{{item.image_url}}" width="150px" height="150px" style="margin-left:0"></a></li>
            {% endfor %}
        </ul>
        
	</div>
    
    <div id="options">
        <a id="newitem" href="#"><h2>New Item</h2></a>
        <a id="addcollaborator" href="#"><h2>Add Collaborators</h2></a>
        <a id="deletelistie" href="{{one_list.list_url}}/remove"><h2>Delete Listie</h2></a>
        </div>
{% endblock %}

{% block javascript %}
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
<script src="{{ url_for('static', filename='modal.js') }}" type="text/javascript"></script>
<script type="text/javascript">
    // Wait until the DOM has loaded before querying the document
    $(document).ready(function(){
        var text = '<form action="{{one_list.list_url}}/new_item" name="addItem" method="POST">\
                    <h3>Add Item</h3><br>\
                    Amazon Link: <input type="text" name="link" id="link"><br>\
                    Name: <input type="text" name="name"><br>\
                    Notes: <input type="text" name="notes"><br>\
                    <div id="submitList"><input type="submit" value="Submit"></div>\
                    </form>';
        var collaborate = '<form action="{{one_list.list_url}}/collaborate" name="addcollaborator" method="POST">\
                    Collaborator Email: <input type="text" name="email" id="email"><br>\
                    <div id="submitList"><input type="submit" value="Submit"></div>\
                    </form>'

        $('a#newitem').click(function(e){
            modal.open({content: text});

            e.preventDefault();
            $('#amazonlink').blur(function () {
                var dat = $(this).value;
                alert($(this).value)
                $.post({
                   url: "http://lit-ravine-8874.herokuapp.com/product_parse",
                   data: {"amazon_url": $(this).value },
                   success: function(data, textStatus, jqXHR){
                        alert(data);
                    }
                    });
                });
            });

        $('a#addcollaborator').click(function(e){
            modal.open({content: collaborate});
            e.preventDefault();
        });
    });
</script>
{% endblock %}  

